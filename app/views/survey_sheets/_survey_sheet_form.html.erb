

<!--TODO: add error message handling code here-->

<%= error_messages_for :survey_sheet %>


<!-- display questions with preset answers, 
    IDEA: maybe we can use view helper to group each question/response -->	
<% @survey_sheet.questions.each do | question| %>   <!--TODO: remember to -->
	<!-- question section -->
	<b><%= question.title %></b><br/>
	Question:  <%= question.description%> <br/>
	<!-- response/answer section -->
	<!-- one question to one answer , not a copy of object, a direct reference, can it be?-->
	<br/>
	<% if question.is_rateable%>
	Rating:
	<%= ratings_for(question, :dimension => :description, :show_user_rating => true)%>
	<% end %>
	<br/>
	<textarea cols="100" rows="3" id="response<%=question.id%>" name="response<%=question.id%>" class=""><%= "#{that_user_response(question).answer_text}" %></textarea><br/>
	
	<br/> Total version
	<% prev_versions = that_user_response(question).versions %>
	
	<table border="1">
	<tr>
		<td>versions</td><td>rating</td> <td>answer</td><td></td>
	</tr>
	<% for ver in prev_versions%>
	<tr> 	
		<td><%= ver.version - 1%></td>
		<td><%= ver.rating%></td>
		<td><%= ver.answer_text%></td>
	<% end %>
	</tr>
	</table>
	<hr/>
<% end %>

<!-- Add save button -->
<div class="submit">
<p>
<%= submit_tag 'Press to Save/Update your answers', :disable_with => "Saving&hellip;" %>
</p>                        
</div> 
<%= hidden_field_tag("survey_sheet_id", @survey_sheet.id) %>
